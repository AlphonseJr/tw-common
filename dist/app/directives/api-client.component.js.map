{"version":3,"file":"api-client.component.js","sourceRoot":"","sources":["api-client.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component } from '@angular/core';\nimport {TwAPIService} from './../services/twapi.service'\nimport {Http, HTTP_PROVIDERS, Headers}  from '@angular/http';\nimport { User } from './../models/user.model';\nimport { Watch } from './../models/watch.model';\nimport { Measure } from './../models/measure.model';\n\n@Component({\n  moduleId: module.id,\n  selector: 'api-client-app',\n  templateUrl: 'api-client.component.html',\n  styleUrls: ['api-client.component.css'],\n  providers: [TwAPIService, HTTP_PROVIDERS]\n})\nexport class ApiClientAppComponent {\n  title = 'api-client works!';\n  tests:Test[] = [];\n  static niark:Watch;\n\n  constructor(private twapi:TwAPIService){\n\n\n\tlet tLogin = new Test('Test Login', \n\t\tfunction(){\n\t\ttwapi.login('mathieu.nayrolles@gmail.com', 'qwerty').then(\n\t\t\tresponse => {\n\t\t\t\tif (response.id != null && response.watches.length === 4) {\n\t\t\t\t\ttLogin.stop(true);\n\t\t\t\t} else {\n\t\t\t\t\ttLogin.stop(false);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t});\n\tthis.tests.push(tLogin);\n\n\n\tlet tFailLogin = new Test('Test Login Fail', \n\t\tfunction(){\n\t\t\ttwapi.login('mathieu.nayrolles@gmail.com', 'awdawd').then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif (typeof response != \"User\") {\n\t\t\t\t\t\ttFailLogin.stop(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttFailLogin.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\tthis.tests.push(tFailLogin);\n\t\n\tlet tEmailTaken = new Test('Test signup fail', \n\t\tfunction () {\n\t\t\ttwapi.signup('mathieu.nayrolles@gmail.com', 'awdawd').then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif (typeof response != \"User\") {\n\t\t\t\t\t\ttEmailTaken.stop(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttEmailTaken.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t});\n\tthis.tests.push(tEmailTaken);\n\n\n\t//Success\n\tlet tSignup = new Test('Test signup',\n\t\tfunction() {\n\t\t\ttwapi.signup('mathieu.nayrolles@viacesi.fr', 'awdawd').then(\n\t\t\tresponse => {\n\n\t\t\t\tif (response.email != undefined) {\n\t\t\t\t\ttSignup.stop(true);\n\t\t\t\t} else {\n\t\t\t\t\ttSignup.stop(false);\n\t\t\t\t}\n\t\t\t}\n\t)});\n\tthis.tests.push(tSignup);\n\n\t//Success\n\tlet tLoginNewAccount = new Test('Test login in new account',\n\t\tfunction() {\n\t\t\ttwapi.login('mathieu.nayrolles@viacesi.fr', 'awdawd').then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.email != undefined) {\n\t\t\t\t\t\ttLoginNewAccount.stop(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttLoginNewAccount.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t\t});\n\tthis.tests.push(tLoginNewAccount);\n\n\tlet tAddWatch = new Test(\"Add a Watch\", \n\t\tfunction(){\n\n\t\t\t\n\t\t\ttwapi.upsertWatch(new Watch(null, \"JLC\")).then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response.id != null) {\n\t\t\t\t\t\ttAddWatch.stop(true, response);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttAddWatch.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t)\n\t});\n\tthis.tests.push(tAddWatch);\n\n\tlet tUpdateWatch = new Test(\"Update Watch\",\n\t\tfunction(data:any){\n\t\t\tconsole.log(\"outside\", data);\n\t\t\tif (data != null) {\n\t\t\t\ttwapi.upsertWatch(data).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tif (response.id != null) {\n\t\t\t\t\t\t\ttUpdateWatch.stop(true, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttUpdateWatch.stop(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}else{\n\t\t\t\ttUpdateWatch.stop(false);\n\t\t\t}\n\t\t}\n\t);\n\tthis.tests.push(tUpdateWatch);\n\n\tlet tAddBaseMeasure = new Test('Add Base Measure', \n\t\tfunction(watch:Watch){\n\n\t\t\tif(watch != null){\n\n\t\t\t\ttwapi.upsertMeasure(watch, new Measure(null, Date.now()+10, Date.now()+2)).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tif (response != null && response.measures.length == 1) {\n\t\t\t\t\t\t\ttAddBaseMeasure.stop(true, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttAddBaseMeasure.stop(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t}else{\n\t\t\t\ttAddBaseMeasure.stop(false);\n\t\t\t}\n\t});\n\tthis.tests.push(tAddBaseMeasure);\n\n\tlet tAddAccuracyMeasure = new Test('Add accuracy measure',\n\t\tfunction(watch:Watch){\n\n\t\t\tif (watch != null) {\n\n\t\t\t\twatch.measures[watch.measures.length - 1].addAccuracyMeasure(Date.now()+20, Date.now()+5);\n\t\t\t\ttwapi.upsertMeasure(watch, watch.measures[watch.measures.length - 1]).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tif (response != null && response.measures.length == 1) {\n\t\t\t\t\t\t\ttAddAccuracyMeasure.stop(true, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttAddAccuracyMeasure.stop(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t} else {\n\t\t\t\ttAddAccuracyMeasure.stop(false);\n\t\t\t}\n\n\t});\n\tthis.tests.push(tAddAccuracyMeasure);\n\n\n\tlet tDeleteMeasure = new Test('Delete measure',\n\t\tfunction(watch: Watch) {\n\n\t\t\tif (watch != null) {\n\n\t\t\t\ttwapi.deleteMeasure(watch, watch.measures[watch.measures.length - 1]).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tif (response != null && response.measures.length == 0) {\n\t\t\t\t\t\t\ttDeleteMeasure.stop(true, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttDeleteMeasure.stop(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t} else {\n\t\t\t\ttDeleteMeasure.stop(false);\n\t\t\t}\n\n\t\t});\n\tthis.tests.push(tDeleteMeasure);\n\n\tlet tDeleteWatch = new Test('Delete Watch', \n\t\tfunction(watch:Watch){\n\t\t\tif (watch != null) {\n\n\t\t\t\tlet user:User = new User(1, '', '', '', '', '', '', [watch]);\n\n\t\t\t\ttwapi.deleteWatch(user, watch).then(\n\t\t\t\t\tresponse => {\n\t\t\t\t\t\tif (response != null && response.watches.length == 0) {\n\t\t\t\t\t\t\ttDeleteWatch.stop(true, response);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttDeleteWatch.stop(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t} else {\n\t\t\t\ttDeleteWatch.stop(false);\n\t\t\t}\n\t});\n\tthis.tests.push(tDeleteWatch);\n\n\tlet tTime = new Test('Get Time', \n\t\tfunction(){\n\t\t\tlet x=0;\n\t\t\ttwapi.accurateTime(\n\t\t\t\tfunction(){\n\t\t\t\t\tx++;\n\t\t\t\t\tconsole.log(x/10*100, \"%\");\n\t\t\t\t}\n\t\t\t).then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif(x == 10){\n\t\t\t\t\t\ttTime.stop(true);\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\ttTime.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t);\n\tthis.tests.push(tTime);\n\n\n\tlet tDeleteAccountTest = new Test('Delete Account', \n\t\tfunction(){\n\n\t\t\ttwapi.deleteAccount().then(\n\t\t\t\tresponse => {\n\t\t\t\t\tif (response === true) {\n\t\t\t\t\t\ttDeleteAccountTest.stop(true);\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttDeleteAccountTest.stop(false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t)});\n\tthis.tests.push(tDeleteAccountTest);\n\n\n\ttLogin.next = tFailLogin;\n\ttFailLogin.next = tEmailTaken;\n\ttEmailTaken.next = tSignup;\n\ttSignup.next = tLoginNewAccount;\n\ttLoginNewAccount.next = tAddWatch;\n\ttAddWatch.next = tUpdateWatch;\n\ttUpdateWatch.next = tAddBaseMeasure;\n\ttAddBaseMeasure.next = tAddAccuracyMeasure;\n\ttAddAccuracyMeasure.next = tDeleteMeasure;\n\ttDeleteMeasure.next = tDeleteWatch;\n\ttDeleteWatch.next = tTime;\n\ttTime.next = tDeleteAccountTest;\n\n\ttLogin.test(null);\n\n  }\n}\n\nexport class Test{\n\ttitle:string;\n\trunning:boolean = true;\n\tstatus:boolean = false;\n\tstartTime:number;\n\tellapsedTime:number;\n\ttest: (data:any) => void;\n\tnext:Test;\n\n\tconstructor(title: string, test: (data?: any) => void) {\n\t\tthis.title = title;\n\t\tthis.test = function(data){\n\t\t\tthis.startTime = Date.now();\n\t\t\ttest(data);\n\t\t};\n\t}\n\n\tstop(success:boolean, toNextTest:any = null){\n\t\tthis.status = success;\n\t\tthis.running = false;\n\t\tthis.ellapsedTime = Date.now() - this.startTime;\n\t\tif(this.next != null){\n\t\t\tthis.next.test(toNextTest);\n\t\t}\n\t}\n}"]}